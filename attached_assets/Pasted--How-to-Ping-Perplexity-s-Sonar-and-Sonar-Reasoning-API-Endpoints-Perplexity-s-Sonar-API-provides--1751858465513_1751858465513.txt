# How to Ping Perplexity's Sonar and Sonar Reasoning API Endpoints

Perplexity's Sonar API provides **real-time web search capabilities** combined with advanced language model reasoning[1][2]. Here's a comprehensive guide on how to properly ping and interact with both Sonar and Sonar Reasoning endpoints.

## API Endpoint Structure

The primary endpoint for all Perplexity Sonar models is:
```
https://api.perplexity.ai/chat/completions
```

This endpoint follows **OpenAI-compatible structure**[3], making it familiar for developers who have worked with other LLM APIs.

## Available Sonar Models

| Model | Context Length | Key Features |
|-------|----------------|--------------|
| `sonar` | 128k | Lightweight, fast web search |
| `sonar-pro` | 200k | Enhanced search with more citations |
| `sonar-reasoning` | 128k | Chain-of-thought reasoning with web search |
| `sonar-reasoning-pro` | 128k | Advanced reasoning with deeper research |

## Basic API Request Structure

### Standard Sonar Request

```bash
curl --request POST \
  --url https://api.perplexity.ai/chat/completions \
  --header 'Authorization: Bearer YOUR_API_KEY' \
  --header 'Content-Type: application/json' \
  --data '{
    "model": "sonar",
    "messages": [
      {
        "role": "user", 
        "content": "What are the latest developments in AI?"
      }
    ]
  }'
```

### Sonar Reasoning Request

```bash
curl --request POST \
  --url https://api.perplexity.ai/chat/completions \
  --header 'Authorization: Bearer YOUR_API_KEY' \
  --header 'Content-Type: application/json' \
  --data '{
    "model": "sonar-reasoning",
    "messages": [
      {
        "role": "user", 
        "content": "Analyze the economic impact of AI on job markets"
      }
    ],
    "max_tokens": 500
  }'
```

## Advanced Configuration Options

### Search Context Control

You can control the **depth of web search** using the `web_search_options` parameter[4]:

```json
{
  "model": "sonar-reasoning-pro",
  "messages": [...],
  "web_search_options": {
    "search_context_size": "high"
  }
}
```

**Search Context Options:**
- `"low"`: Minimal search context, cost-optimized[4]
- `"medium"`: Default balanced approach[4]
- `"high"`: Comprehensive search for research-heavy queries[4]

### Reasoning Effort (Sonar Reasoning Models)

For reasoning models, you can set the reasoning effort level[5]:

```json
{
  "model": "sonar-reasoning",
  "messages": [...],
  "reasoning_effort": "high"
}
```

## Response Structure

### Standard Response Format

```json
{
  "id": "b3505b4b-cafb-43f1-a905-97a665f28406",
  "model": "sonar-reasoning",
  "created": 1743529637,
  "usage": {
    "prompt_tokens": 19,
    "completion_tokens": 1793,
    "total_tokens": 1812
  },
  "citations": [
    "https://example.com/source1",
    "https://example.com/source2"
  ],
  "choices": [
    {
      "message": {
        "role": "assistant",
        "content": "Response content here..."
      }
    }
  ]
}
```

### Key Response Elements

- **Citations**: Array of source URLs used for the response[6]
- **Usage**: Token consumption breakdown[6]
- **Chain-of-thought**: Reasoning models include `` tags showing the reasoning process[6]

## Authentication Setup

### Getting API Keys

1. **Direct Perplexity API**: Visit the API Keys tab in the Perplexity API Portal[7]
2. **OpenRouter Alternative**: Use OpenRouter for consolidated billing and access[8][9]

### Authentication Header

```bash
--header 'Authorization: Bearer YOUR_API_KEY'
```

## Pricing Structure

| Model | Input Tokens (per million) | Output Tokens (per million) | Requests (per 1000) |
|-------|----------------------------|------------------------------|---------------------|
| sonar-reasoning | $1 | $5 | $5-$12 |
| sonar-reasoning-pro | Higher cost | Higher cost | Higher cost |

**Note**: Search context size affects pricing - `"high"` context increases costs due to more extensive web retrieval[4].

## Implementation Examples

### Python with Requests

```python
import requests

url = "https://api.perplexity.ai/chat/completions"
headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}

payload = {
    "model": "sonar-reasoning",
    "messages": [
        {"role": "user", "content": "Your query here"}
    ],
    "web_search_options": {
        "search_context_size": "medium"
    }
}

response = requests.post(url, json=payload, headers=headers)
```

### Using AI SDK

```javascript
import { perplexity } from '@ai-sdk/perplexity';
import { generateText } from 'ai';

const { text, sources } = await generateText({
  model: perplexity('sonar-pro'),
  prompt: 'What are the latest developments in quantum computing?',
});
```

## Best Practices

### Model Selection
- Use **sonar** for quick factual queries[2]
- Use **sonar-reasoning** for complex analysis requiring step-by-step thinking[10][6]
- Use **sonar-pro** for enhanced citation coverage[2]

### Cost Optimization
- Start with `"low"` search context for high-volume applications[4]
- Upgrade to `"high"` context selectively for complex research queries[4]
- Consider using **sonar** instead of **sonar-reasoning** when chain-of-thought isn't needed

### Error Handling
- Implement proper retry logic for rate limits
- Handle authentication errors gracefully
- Parse citation arrays for source attribution

The Sonar API represents a significant advancement in **agent-based systems packaged as simple API endpoints**[11], combining real-time web search with advanced reasoning capabilities in a familiar REST interface.

[1] https://sonar.perplexity.ai
[2] https://www.perplexity.ai/hub/blog/introducing-the-sonar-pro-api
[3] https://docs.perplexity.ai/faq/faq
[4] https://docs.perplexity.ai/guides/search-context-size-guide
[5] https://docs.litellm.ai/docs/providers/perplexity
[6] https://docs.perplexity.ai/models/models/sonar-reasoning
[7] https://docs.perplexity.ai/guides/getting-started
[8] https://www.youtube.com/watch?v=o8euh5GkUzg
[9] https://openrouter.ai/perplexity/sonar/api
[10] https://openrouter.ai/perplexity/sonar-reasoning
[11] https://anth.us/blog/perplexity-sonar-api/
[12] https://zuplo.com/blog/2025/03/28/perplexity-api
[13] https://docs.llamaindex.ai/en/stable/examples/llm/perplexity/
[14] https://www.reddit.com/r/perplexity_ai/comments/1kldf4n/sonarreasoningpros_full_updated_system_prompt/
[15] https://www.youtube.com/watch?v=Ib0BEFKAvn0
[16] https://apidog.com/blog/perplexity-ai-api/
[17] https://www.postman.com/ai-engineer/generative-ai-apis/request/vn20z24/perplexity-sonar-reasoning
[18] https://x.com/perplexity_ai/status/1884409454675759211?lang=en
[19] https://www.perplexity.ai/hub/blog/perplexity-sonar-dominates-new-search-arena-evolution
[20] https://docs.perplexity.ai/guides/pricing
[21] https://www.linkedin.com/posts/perplexity-ai_introducing-sonar-reasoning-our-new-api-activity-7290175211772002304-qD4U
[22] https://docs.perplexity.ai/guides/model-cards
[23] https://n8n.io/workflows/3673-ai-powered-research-assistant-with-perplexity-sonar-api/
[24] https://www.youtube.com/watch?v=myH2T6XUEKE
[25] https://www.planetnocode.com/tutorial/revolutionize-your-search-discover-perplexity-sonar
[26] https://ai-sdk.dev/providers/ai-sdk-providers/perplexity
[27] https://www.youtube.com/watch?v=kveR_MXjlME
[28] https://www.colinmcnamara.com/how-perplexitys-sonar-api-can-revolutionize-ai-search-for-enterprises/
[29] https://docs.perplexity.ai/home